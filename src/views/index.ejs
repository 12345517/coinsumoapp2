<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coinsumo</title>
    <link rel="stylesheet" href="styles.css"> <!-- Tu hoja de estilos -->
</head>

<body>
    <header>
        <h1>Bienvenido a Coinsumo</h1>
        <nav>
            <ul>
                <li><a href="#quienes-somos">Quiénes Somos</a></li>
                <li><a href="#registro">Registro</a></li>
                <li><a href="#ventajas">Ventajas</a></li>
                <li><a href="login.html">Iniciar Sesión</a></li> <!-- Enlace a Login -->
                <li><a href="enlaces-comerciales.html">Enlaces Comerciales</a></li> <!-- Enlace a la nueva página -->
                <li><a href="https://coinsumo.co">Ir a Coinsumo</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="quienes-somos">
            <h2>Quiénes Somos</h2>
            <p>Descripción de Coinsumo y lo que ofrecemos...</p>
        </section>

        <section id="registro">
            <h2>Registro para Afiliados</h2>
            <form id="registrationForm">
                <label for="idNumber">Cédula de Ciudadanía:</label>
                <input type="text" id="idNumber" name="idNumber" required>
        
                <label for="name">Nombre:</label>
                <input type="text" id="name" name="name" required>
                
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                
                <label for="password">Contraseña:</label>
                <input type="password" id="password" name="password" required>
                
                <label for="whatsapp">WhatsApp:</label>
                <input type="text" id="whatsapp" name="whatsapp">
        
                <label for="role">Tipo de Usuario:</label>
                <select id="role" name="role" required onchange="mostrarCasillaEmpresario()">
                    <option value="cliente">Cliente</option>
                    <option value="empresario">Empresario</option>
                    <option value="mayorista">Mayorista</option>
                    <option value="colaborador">Colaborador</option>
                </select>
        
                <div id="casillaEmpresario" style="display: none;">
                    <label for="porcentaje">Porcentaje para Coinsumo:</label>
                    <input type="number" id="porcentaje" name="porcentaje" step="0.01" placeholder="%">
                </div>
        
                <label for="pais">País:</label>
                <input type="text" id="pais" name="pais" required>
        
                <label for="departamento">Departamento:</label>
                <input type="text" id="departamento" name="departamento" required>
        
                <label for="ciudad">Ciudad:</label>
                <input type="text" id="ciudad" name="ciudad" required>
        
                <label for="direccion">Dirección:</label>
                <input type="text" id="direccion" name="direccion" required>
        
                <label for="sponsorId">ID del Patrocinador:</label>
                <input type="text" id="sponsorId" name="sponsorId" required>
        
                <input type="checkbox" id="acceptTerms" name="acceptTerms" required>
                <label for="acceptTerms">Acepto los <a href="#terms">términos y condiciones</a></label>
        
                <a href="javascript:;" id="btn_send_form" >Registrar</a>
            </form>
        </section>
        
        <section id="terms">
            <h3>Términos y Condiciones</h3>
            <p>Al registrarte, aceptas nuestros términos y condiciones, que incluyen el uso de tu información personal, política de privacidad, y participación en la red de afiliados.</p>
            <p>1. *Uso de Datos*: Coinsumo recopilará y almacenará tu información personal.</p>
            <p>2. *Política de Privacidad*: Nos comprometemos a proteger tu información personal.</p>
            <p>3. *Participación en la Plataforma*: Al registrarte, confirmas que has leído y entendido estos términos.</p>
        </section>
        
        <section id="ventajas">
            <h2>Ventajas de ser parte de Coinsumo</h2>
            <ul>
                <li>Gana puntos por recomendar y comprar.</li>
                <li>Accede a productos exclusivos.</li>
                <li>Utiliza nuestra billetera digital.</li>
            </ul>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Coinsumo. Todos los derechos reservados. | <a href="#contacto">Contáctanos</a></p>
    </footer>

    <script>
        function mostrarCasillaEmpresario() {
            const tipoUsuario = document.getElementById('role').value;
            const casillaEmpresario = document.getElementById('casillaEmpresario');
            if (tipoUsuario === 'empresario') {
                casillaEmpresario.style.display = 'block';
            } else {
                casillaEmpresario.style.display = 'none';
            }
        }

        document.getElementById('btn_send_form').addEventListener('click', function() {
    

            console.log('enviando formulario...')

            const idNumber = document.getElementById('idNumber').value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const whatsapp = document.getElementById('whatsapp').value;
            const pais = document.getElementById('pais').value;
            const departamento = document.getElementById('departamento').value;
            const ciudad = document.getElementById('ciudad').value;
            const direccion = document.getElementById('direccion').value;
            const role = document.getElementById('role').value;
            const sponsorId = document.getElementById('sponsorId').value;
            const porcentaje = document.getElementById('porcentaje').value;

            const data = { idNumber, name, email, password, whatsapp, pais, departamento, ciudad, direccion, role, sponsorId, porcentaje };

            try {
                const response =  fetch('/api/users/registro', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result =  response.json();
                if (response.ok) {
                    alert('Registro exitoso');
                    //window.location.href = '/exito';
                } else {
                    alert(`Error en el registro: ${result.message}`);
                }
            } catch (error) {
                console.error('Error al enviar el formulario:', error);
                alert('Error al enviar el formulario');
            }
        });
    </script>
</body>
</html>